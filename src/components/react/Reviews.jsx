/* =========================================
   SECTION: Reviews  #reviews
   Auto-scrolling Swiper carousel of reviews (static data)
   Each review supports expand/collapse for long text
   ======================================== */
import { useState } from 'react';
import { Star, ExternalLink, ChevronDown, ChevronUp } from 'lucide-react';
import { Swiper, SwiperSlide } from 'swiper/react';
import { Navigation, Autoplay } from 'swiper/modules';
import 'swiper/css';
import 'swiper/css/navigation';

const REVIEWS_DATA = [
  {
    id: '1',
    author_name: '–í–ª–∞–¥–∏—Å–ª–∞–≤ –ö.',
    rating: 5,
    review_text: '–û—Ç–ª–∏—á–Ω–æ–µ –º–µ—Å—Ç–æ –¥–ª—è –æ—Ç–¥—ã—Ö–∞ –≤ –î–∂—É–±–≥–µ! –û—á–µ–Ω—å –¥–æ–≤–æ–ª—å–Ω—ã –æ—Ç–¥—ã—Ö–æ–º –≤ —ç—Ç–æ–º –≥–æ—Å—Ç–µ–≤–æ–º –¥–æ–º–µ. –ì–ª–∞–≤–Ω—ã–π –ø–ª—é—Å ‚Äì –∏–¥–µ–∞–ª—å–Ω–æ–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ: –¥–æ –º–æ—Ä—è –±—É–∫–≤–∞–ª—å–Ω–æ –ø–∞—Ä–∞ –º–∏–Ω—É—Ç. –ù–æ–º–µ—Ä–∞ –æ—á–µ–Ω—å —É—é—Ç–Ω—ã–µ –∏ –∫–æ–º—Ñ–æ—Ä—Ç–Ω—ã–µ, –µ—Å—Ç—å –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ. –î–≤–æ—Ä –ø—Ä–æ—Å—Ç–æ –≤–æ—Å—Ö–∏—Ç–∏—Ç–µ–ª—å–Ω—ã–π ‚Äì —É—Ç–æ–ø–∞–µ—Ç –≤ –∑–µ–ª–µ–Ω–∏, –ø—Ä–∏—è—Ç–Ω–æ –ø—Ä–æ–≤–æ–¥–∏—Ç—å —Ç–∞–º –≤—Ä–µ–º—è. –•–æ–∑—è–µ–≤–∞ –æ—á–µ–Ω—å –ø—Ä–∏–≤–µ—Ç–ª–∏–≤—ã–µ –∏ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω—ã–µ. –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º –≤—Å–µ–º, –∫—Ç–æ –∏—â–µ—Ç —Å–ø–æ–∫–æ–π–Ω—ã–π –∏ –∫–æ–º—Ñ–æ—Ä—Ç–Ω—ã–π –æ—Ç–¥—ã—Ö —É –º–æ—Ä—è!',
    source: '–Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç—ã',
  },
  {
    id: '2',
    author_name: '–ï–∫–∞—Ç–µ—Ä–∏–Ω–∞ –ó.',
    rating: 5,
    review_text: '–î–æ–ª–≥–æ –ø–æ–¥—Ö–æ–¥–∏–ª–∞ –∫ –≤—ã–±–æ—Ä—É –∂–∏–ª—å—è –¥–ª—è –æ—Ç–¥—ã—Ö–∞. –û—Å—Ç–∞–Ω–æ–≤–∏–ª–∞—Å—å –Ω–∞ —ç—Ç–æ–º –≥–æ—Å—Ç–µ–≤–æ–º –¥–æ–º–µ. –¶–µ–Ω–∞ –æ—Ç–ª–∏—á–Ω–∞—è, –≤—Å–µ –≤ —à–∞–≥–æ–≤–æ–π –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏, —Ä—è–¥–æ–º –µ—Å—Ç—å –ø—Ä–æ–¥—É–∫—Ç–æ–≤—ã–π –º–∞–≥–∞–∑–∏–Ω –∫—Ä—É–≥–ª–æ—Å—É—Ç–æ—á–Ω—ã–π. –í—Å–µ —á–∏—Å—Ç–µ–Ω—å–∫–æ –∏ —É—Ö–æ–∂–µ–Ω–æ, —Ö–æ–∑—è–µ–≤–∞ –æ—Ç–ª–∏—á–Ω—ã–µ, –Ω–∞ –≤—Å–µ –≤–æ–ø—Ä–æ—Å—ã –æ—Ç–≤–µ—á–∞–ª–∏ –≤—Å–µ–≥–¥–∞ –ø–æ–¥—Ä–æ–±–Ω–æ, –≤—Å–µ —É—Å–ª–æ–≤–∏—è –µ—Å—Ç—å –Ω–∞ –ª—é–±–æ–π –∫–æ—à–µ–ª–µ–∫. –î–æ –º–æ—Ä—è –∏–¥—Ç–∏ –±—É–∫–≤–∞–ª—å–Ω–æ 1-2 –º–∏–Ω—É—Ç—ã, —á—Ç–æ –µ—â–µ –Ω–µ–º–∞–ª–æ–≤–∞–∂–Ω–æ, –ø–æ –Ω–æ—á–∞–º –Ω–∞ –Ω–∞–±–µ—Ä–µ–∂–Ω–æ–π –≤—Å–µ–≥–¥–∞ –∏–≥—Ä–∞–µ—Ç –º—É–∑—ã–∫–∞, –Ω–æ –µ–µ –ù–ï –°–õ–´–®–ù–û –≤ –Ω–æ–º–µ—Ä–∞—Ö, —ç—Ç–æ —Ä–∞–¥—É–µ—Ç. –ì–æ—Å—Ç–µ–≤–æ–π –¥–æ–º –æ—Ç–ª–∏—á–Ω—ã–π ü´∂üèª',
    source: '–Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç—ã',
  },
  {
    id: '3',
    author_name: '–ï–≤–≥–µ–Ω–∏—è –ö.',
    rating: 5,
    review_text: '–û—Ç–ª–∏—á–Ω—ã–π –≥–æ—Å—Ç–µ–≤–æ–π –¥–æ–º. –û—Ç–¥—ã—Ö–∞–ª–∏ –≤ –∫–æ–Ω—Ü–µ –∏—é–ª—è –∏ —Å —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å—é –º–æ–≥—É —Å–∫–∞–∑–∞—Ç—å –µ—Å–ª–∏ –µ—â–µ –ø—Ä–∏–µ–¥—É –æ—Ç–¥—ã—Ö–∞—Ç—å –≤ –î–∂—É–±–≥—É —Ç–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –æ—Å—Ç–∞–Ω–æ–≤–ª—é—Å—å –∏–º–µ–Ω–Ω–æ –∑–¥–µ—Å—å. –ß–∏—Å—Ç—ã–µ —É—é—Ç–Ω—ã–µ –Ω–æ–º–µ—Ä–∞, —Å—Ç–æ–ª–∏–∫–∏ –æ–∫–æ–ª–æ –∫–∞–∂–¥–æ–≥–æ –Ω–æ–º–µ—Ä–∞, –æ—á–µ–Ω—å —É–¥–æ–±–Ω–æ –ø–æ—Å–∏–¥–µ—Ç—å –≤–µ—á–µ—Ä–æ–º. –¢–µ—Ä—Ä–∏—Ç–æ—Ä–∏—è —á–∏—Å—Ç–∞—è, –∑–µ–ª–µ–Ω–∞—è, –≤–∏–¥–Ω–æ —á—Ç–æ –≤—Å–µ —É—Ö–æ–∂–µ–Ω–æ. –ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –ø–∞—Ä–∫–æ–≤–∫–∞ –Ω–∞ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏, –º–∞—à–∏–Ω–∞ —Å—Ç–æ–∏—Ç –ø—Ä—è–º–æ –ø–æ–¥ –æ–∫–Ω–∞–º–∏. –ù–∞ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏ –æ—á–µ–Ω—å —Ç–∏—Ö–æ, —Å–ø–æ–∫–æ–π–Ω–æ. –î–æ –º–æ—Ä—è 70 –º–µ—Ç—Ä–æ–≤. ',
    source: '–Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç—ã',
  },
  {
    id: '4',
    author_name: '–ò–Ω–Ω–∞ –ú.',
    rating: 5,
    review_text: '–•–æ—á—É –≤—ã—Ä–∞–∑–∏—Ç—å –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å –∑–∞ –≥–æ—Å—Ç–µ–ø—Ä–∏–∏–º—Å—Ç–≤–æ –≥–æ—Å—Ç–µ–≤–æ–º—É –¥–æ–º—É –î–µ–ª—å—Ñ–∏–Ω. –ü—Ä–æ–µ–∑–¥–æ–º –æ–∫–∞–∑–∞–ª–∏—Å—å –≤ –î–∂—É–±–≥–µ –∏ –∑–∞—Ö–æ—Ç–µ–ª–∏ –æ—Å—Ç–∞—Ç—å—Å—è –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π, —Å–ª—É—á–∞–π–Ω–æ –ø–æ–ø–∞–ª–∏ –Ω–∞ —Å–≤–æ–±–æ–¥–Ω—ã–µ –º–µ—Å—Ç–∞ –≤ —ç—Ç–æ–º –¥–æ–º–µ. –û—á–µ–Ω—å —á–∏—Å—Ç–æ, —É—é—Ç–Ω–æ –≤–æ –¥–≤–æ—Ä–µ –∏ –Ω–æ–º–µ—Ä–µ. –û—Ç–¥–æ—Ö–Ω—É–ª–∏ —Å –∫–æ–º—Ñ–æ—Ä—Ç–æ–º –∏ –ø–æ–∑–∏—Ç–∏–≤–Ω—ã–º–∏ —ç–º–æ—Ü–∏—è–º–∏. –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –±—É–¥–µ–º —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞—Ç—å –æ—Ç–¥—ã—Ö –∑–¥–µ—Å—å –∑–Ω–∞–∫–æ–º—ã–º –∏ –¥—Ä—É–∑—å—è–º. –ú–æ—Ä–µ –≤ –º–∏–Ω—É—Ç–µ —Ö–æ–¥—å–±—ã, –ø–µ—Ä–≤–∞—è –ª–∏–Ω–∏—è.',
    source: '–Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç—ã',
  },
  {
    id: '5',
    author_name: '–ù–∞—Ç–∞–ª—å—è –°.',
    rating: 5,
    review_text: '–•–æ—á—É –≤—ã—Ä–∞–∑–∏—Ç—å –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å –ù–∞—Ç–∞–ª—å–µ —Å –û–ª–µ–≥–æ–º –∑–∞ –≥–æ—Å—Ç–µ–≤–æ–π –¥–æ–º "–î–µ–ª—å—Ñ–∏–Ω"!!! –¢–µ—Ä—Ä–∏—Ç–æ—Ä–∏—è –í–°–Ø –æ–∑–µ–ª–µ–Ω–µ–Ω–∞ , —Ñ–∞–Ω—Ç–∞—Å—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ —É–≥–æ–ª–∫–∞ –¥–≤–æ—Ä–∞,–µ—Å—Ç—å –Ω–µ–±–æ–ª—å—à–∞—è –¥–µ—Ç—Å–∫–∞—è –ø–ª–æ—â–∞–¥–∫–∞, –ø–∞—Ä–∫–æ–≤–∫–∞ –¥–ª—è –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π,—É—é—Ç–Ω–∞—è –∏ —á–∏—Å—Ç–∞—è –∫—É—Ö–Ω—è (–≥–¥–µ –µ—Å—Ç—å –≤—Å—ë –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –¥–ª—è –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è –ø–∏—â–∏) –ø–µ—Ä–µ—Ö–æ–¥—è—â–∞—è –≤ —Å—Ç–æ–ª–æ–≤—É—é.–ù–∞ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –±–µ—Å–µ–¥–æ–∫ –¥–ª—è –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ–≥–æ –æ—Ç–¥—ã—Ö–∞ ,–µ—Å—Ç—å —à–∞—à–ª—ã—á–Ω–∞—è –∑–æ–Ω–∞ .–ú—ã –≥–æ—Å—Ç–∏–ª–∏ –≤ –Ω–æ–º–µ—Ä–µ "–ö–æ–º—Ñ–æ—Ä—Ç"-–æ—á–µ–Ω—å —É—é—Ç–Ω—ã–π !!! –ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Ç–æ,—á—Ç–æ –¥–æ –º–æ—Ä—è 50 –º–µ—Ç—Ä–æ–≤, –≤–æ–æ–±—â–µ –Ω–µ —Å–ª—ã—à–∞–ª–∏ —à—É–º–∞ –º—É–∑—ã–∫–∏ –≤ —Å–≤–æ–µ–º –Ω–æ–º–µ—Ä–µ –∏–∑ –±–∞—Ä–æ–≤ –Ω–∞ –ø–æ–±–µ—Ä–µ–∂—å–µ,—Ç–∞–∫ –∫–∞–∫ –∏ –æ–∫–Ω–∞ –∏ –¥–≤–µ—Ä–∏ –æ—á–µ–Ω—å –ø–ª–æ—Ç–Ω–æ –∑–∞–∫—Ä—ã–≤–∞–ª–∏—Å—å. –ù–∏–∑–∫–∏–π –ø–æ–∫–ª–æ–Ω –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É –í–ï–ù–ï–†–ï-—á—É—Ç–∫–∞—è ,–∑–∞–±–æ—Ç–ª–∏–≤–∞—è ,–æ—Ç–∑—ã–≤—á–∏–≤–∞—è,–ø—Ä–∏–≤–µ—Ç–ª–∏–≤–∞—è !!! –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤–µ—Ä–Ω—ë–º—Å—è –≤ —Å–ª–µ–¥—É—é—â–µ–º –≥–æ–¥—É –∏–º–µ–Ω–Ω–æ –Ω–∞ –ù–∞–±–µ—Ä–µ–∂–Ω—É—é 7!!! –í—Å–µ–º —Å–≤–æ–∏–º –¥—Ä—É–∑—å—è–º –∏ –∑–Ω–∞–∫–æ–º—ã–º —Ä–µ–∫–æ–º–µ–Ω–¥—É—é!!!',
    source: '–Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç—ã',
  },
  {
    id: '6',
    author_name: '–ê–ª–µ–∫—Å–∞–Ω–¥—Ä',
    rating: 5,
    review_text: '–û—á–µ–Ω—å —Ö–æ—Ä–æ—à–µ–µ –º–µ—Å—Ç–æ –¥–ª—è –æ—Ç–¥—ã—Ö–∞. –¶–µ–Ω—ã –∞–¥–µ–∫–≤–∞—Ç–Ω—ã–µ. –ú–æ—Ä–µ –≤ –ø—è—Ç–∏ –º–∏–Ω—É—Ç–∞—Ö —Ö–æ–¥—å–±—ã. –û—á–µ–Ω—å –ø—Ä–∏–≤–µ—Ç–ª–∏–≤—ã–µ –∏ –¥–æ–±—Ä–æ–∂–µ–ª–∞—Ç–µ–ª—å–Ω—ã–µ —Ö–æ–∑—è–µ–≤–∞. –í—Å—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —á–∏—Å—Ç–∞—è —É—Ö–æ–∂–µ–Ω–Ω–∞—è. –í–º–µ—Å—Ç–∏—Ç–µ–ª—å–Ω–∞—è –ø–∞—Ä–∫–æ–≤–∫–∞. –í—Å–µ –≤–æ–ø—Ä–æ—Å—ã –≤–æ–∑–Ω–∏–∫–∞—é—â–∏–µ —Ä–µ—à–∞—é—Ç—Å—è –±—ã—Å—Ç—Ä–æ –∏ –±–µ–∑ –ø—Ä–æ–≤–æ–ª–æ—á–µ–∫. –î–ª—è –¥–µ—Ç–∏—à–µ–∫ –µ—Å—Ç—å –ø–µ—Å–æ—á–Ω–∏—Ü–∞, –∫–∞—á–µ–ª–∏. –ó–∞ –≤—Å–µ –≤—Ä–µ–º—è –æ—Ç–¥—ã—Ö–∞ —á—É–≤—Å—Ç–≤–æ–≤–∞–ª–∏ —Å–µ–±—è –∫–∞–∫ –¥–æ–º–∞. –ù–æ–º–µ—Ä–∞ —Ö–æ—Ä–æ—à–∏–µ. –ù–∞ —Ç–µ—Ä–∞—Å—Å–∞—Ö –≤–æ–∑–ª–µ –∫–∞–∂–¥–æ–≥–æ –Ω–æ–º–µ—Ä–∞ —Å–≤–æ–π —Å—Ç–æ–ª–∏–∫. –†–µ–∫–æ–º–µ–Ω–¥—É—é –¥–ª—è –æ—Ç–¥—ã—Ö–∞.',
    source: '–Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç—ã',
  },
  {
    id: '7',
    author_name: '–ì–∞–ª–∏–Ω–∞',
    rating: 5,
    review_text: '–í –≥–æ—Å—Ç–µ–≤–æ–º –¥–æ–º–µ ¬´–î–µ–ª—å—Ñ–∏–Ω¬ª –æ—Ç–¥—ã—Ö–∞–ª–∏ –≤–ø–µ—Ä–≤—ã–µ. –û—á–µ–Ω—å —É—é—Ç–Ω–æ, –∫—Ä–∞—Å–∏–≤–æ, —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ. –î–≤–æ—Ä —É—Ç–æ–ø–∞–µ—Ç –≤ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω—ã—Ö –∫—É—Å—Ç–∞—Ä–Ω–∏–∫–∞—Ö –∏ —Ü–≤–µ—Ç–∞—Ö. –ú–Ω–æ–≥–æ –∑–æ–Ω –æ—Ç–¥—ã—Ö–∞, –æ—Ñ–æ—Ä–º–ª–µ–Ω–Ω—ã—Ö –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ —Å –ª—é–±–æ–≤—å—é. –ö–æ–º–Ω–∞—Ç—ã –ø–æ—Ä–∞–∂–∞—é—Ç —É—é—Ç–æ–º, —á–∏—Å—Ç–æ—Ç–æ–π, –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ–º –∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –º–µ–±–µ–ª—å—é. –†–µ—Å–ø–µ–∫—Ç —Ö–æ–∑—è–π–∫–µ –ù–∞—Ç–∞–ª—å–µ, –∑–∞ —Ç–≤–æ—Ä—á–µ—Å–∫–∏–π –ø–æ–¥—Ö–æ–¥ –≤ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –æ—Ç–¥—ã—Ö–∞. –û–≥—Ä–æ–º–Ω–æ–µ —Å–ø–∞—Å–∏–±–æ –∑–∞ —Ä–∞–¥—É—à–Ω—ã–π –ø—Ä–∏–µ–º –í–µ–Ω–µ—Ä–µ. –ï–µ –¥–æ–±—Ä–æ—Ç–∞ –∏ –æ—Ç–∑—ã–≤—á–∏–≤–æ—Å—Ç—å –Ω–∞–¥–æ–ª–≥–æ –∑–∞–ø–æ–º–Ω–∏—Ç—Å—è. –ë—É–¥—É –≤—Å–µ–º –¥—Ä—É–∑—å—è–º —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞—Ç—å –æ —Ç–∞–∫–æ–º —á—É–¥–µ—Å–Ω–æ–º ¬´—Ä–∞–π—Å–∫–æ–º —É–≥–æ–ª–∫–µ¬ª –ø–æ–¥ –Ω–∞–∑–≤–∞–Ω–∏–µ–º ¬´–î–µ–ª—å—Ñ–∏–Ω¬ª. –î–æ –Ω–æ–≤—ã—Ö –≤—Å—Ç—Ä–µ—á! –í –±—É–¥—É—â–µ–º –≥–æ–¥—É –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–∏–µ–¥–µ–º.',
    source: 'kudanamore.ru',
  },
  {
    id: '8',
    author_name: '–ï–ª–µ–Ω–∞ –ß–µ—Ö–æ–≤–∞',
    rating: 5,
    review_text: '–û—á–µ–Ω—å —É—é—Ç–Ω–æ–µ, —á–∏—Å—Ç–æ–µ –∏ –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ–µ –º–µ—Å—Ç–æ –¥–ª—è –æ—Ç–¥—ã—Ö–∞. –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–ª–∏—á–Ω–æ–µ - –≤ –¥–≤—É—Ö —à–∞–≥–∞—Ö –æ—Ç –º–æ—Ä—è –∏ –≤—Å–µ–π –Ω–∞–±–µ—Ä–µ–∂–Ω–æ–π. –ü–µ—Ä—Å–æ–Ω–∞–ª –≤—Å–µ–≥–¥–∞ –ø—Ä–∏–≤–µ—Ç–ª–∏–≤—ã–π –∏ –æ—Ç–∑—ã–≤—á–∏–≤—ã–π, –±—ã—Å—Ç—Ä–æ —Ä–µ—à–∞—é—Ç –ª—é–±—ã–µ –≤–æ–ø—Ä–æ—Å—ã. –¢–µ—Ä—Ä–∏—Ç–æ—Ä–∏—è —É—Ö–æ–∂–µ–Ω–Ω–∞—è, –º–Ω–æ–≥–æ –∑–µ–ª–µ–Ω–∏. –ù–æ–º–µ—Ä–∞ –ø—Ä–æ—Å—Ç–æ—Ä–Ω—ã–µ, —Å–≤–µ–∂–∏–π —Ä–µ–º–æ–Ω—Ç, –≤—Å—ë –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –¥–ª—è –ø—Ä–æ–∂–∏–≤–∞–Ω–∏—è –µ—Å—Ç—å. –†–µ–∫–æ–º–µ–Ω–¥—É—é –≤—Å–µ–º, –∫—Ç–æ —Ö–æ—á–µ—Ç —Ö–æ—Ä–æ—à–æ –æ—Ç–¥–æ—Ö–Ω—É—Ç—å!',
    source: '2–ì–∏—Å',
  },
];

const TRUNCATE_LENGTH = 120;

function ReviewCard({ review, expandedReviewId, onToggleExpand }) {
  const isExpanded = expandedReviewId === review.id;
  const needsTruncation = review.review_text.length > TRUNCATE_LENGTH;
  const displayText =
    !needsTruncation || isExpanded
      ? review.review_text
      : review.review_text.slice(0, TRUNCATE_LENGTH).trimEnd() + '‚Ä¶';

  const getInitials = (name) =>
    name.split(' ').map((w) => w[0]).join('').toUpperCase().slice(0, 2);

  const handleToggle = () => {
    onToggleExpand(isExpanded ? null : review.id);
  };

  return (
    <div className="bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow flex flex-col h-full">
      <div className="flex items-start gap-4 mb-4">
        <div className="flex-shrink-0">
          <div className="w-12 h-12 rounded-full bg-primary-100 flex items-center justify-center text-primary-600 font-semibold">
            {getInitials(review.author_name)}
          </div>
        </div>
        <div className="flex-1">
          <h4 className="font-semibold text-slate-900">{review.author_name}</h4>
          <div className="flex gap-1 mt-1">
            {[...Array(5)].map((_, i) => (
              <Star
                key={i}
                className={`w-4 h-4 ${
                  i < review.rating
                    ? 'fill-yellow-400 text-yellow-400'
                    : 'text-slate-300'
                }`}
              />
            ))}
          </div>
        </div>
      </div>

      <div className="flex-1">
        <p className="text-slate-600 leading-relaxed mb-2">{displayText}</p>
        {needsTruncation && (
          <button
            onClick={handleToggle}
            className="inline-flex items-center gap-1 text-primary-600 hover:text-primary-700 text-sm font-medium transition-colors mt-1"
            aria-expanded={isExpanded}
          >
            {isExpanded ? (
              <>–°–≤–µ—Ä–Ω—É—Ç—å <ChevronUp className="w-4 h-4" /></>
            ) : (
              <>–ß–∏—Ç–∞—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é <ChevronDown className="w-4 h-4" /></>
            )}
          </button>
        )}
      </div>

      <p className="text-xs text-slate-400 mt-4 pt-3 border-t border-slate-100">
        –ò—Å—Ç–æ—á–Ω–∏–∫: {review.source}
      </p>
    </div>
  );
}

export default function Reviews() {
  const [expandedReviewId, setExpandedReviewId] = useState(null);

  return (
    <section id="reviews" className="py-20 bg-slate-50">
      <style>{`
        .reviews-swiper .swiper-button-next,
        .reviews-swiper .swiper-button-prev {
          width: 30px !important;
          height: 30px !important;
          background: white;
          border-radius: 50%;
          box-shadow: 0 1px 6px rgba(0,0,0,0.12);
          color: #475569;
          top: calc(50% - 24px);
        }
        .reviews-swiper .swiper-button-next::after,
        .reviews-swiper .swiper-button-prev::after {
          font-size: 11px !important;
          font-weight: 800;
        }
        .reviews-swiper .swiper-button-disabled {
          opacity: 0.25 !important;
        }
        .reviews-swiper {
          padding-bottom: 2rem !important; /* –æ—Ç—Å—Ç—É–ø —Å–Ω–∏–∑—É –¥–ª—è —Ç–µ–Ω–µ–π */
        }
      `}</style>

      <div className="container mx-auto px-4">
        <div className="text-center mb-12">
          <h2 className="text-4xl font-bold text-slate-900 mb-4">–û—Ç–∑—ã–≤—ã –Ω–∞—à–∏—Ö –≥–æ—Å—Ç–µ–π</h2>
          <p className="text-lg text-slate-600 max-w-2xl mx-auto">
            –ë–æ–ª–µ–µ 250 –¥–æ–≤–æ–ª—å–Ω—ã—Ö –≥–æ—Å—Ç–µ–π —É–∂–µ –æ—Å—Ç–∞–≤–∏–ª–∏ —Å–≤–æ–∏ –æ—Ç–∑—ã–≤—ã
          </p>
        </div>

        <Swiper
          modules={[Navigation, Autoplay]}
          spaceBetween={24}
          slidesPerView={1}
          navigation
          autoplay={{
            delay: 5000,
            pauseOnMouseEnter: true,
          }}
          breakpoints={{
            768: { slidesPerView: 2 },
            1024: { slidesPerView: 3 },
          }}
          className="reviews-swiper pb-4"
        >
          {REVIEWS_DATA.map((review) => (
            <SwiperSlide key={review.id} className="!h-auto self-stretch">
              <ReviewCard 
                review={review} 
                expandedReviewId={expandedReviewId}
                onToggleExpand={setExpandedReviewId}
              />
            </SwiperSlide>
          ))}
        </Swiper>

        <div className="text-center mt-10">
          <a
            href="https://yandex.ru/maps/org/delfin/209725973823/reviews/"
            target="_blank"
            rel="noopener noreferrer"
            className="inline-flex items-center gap-2 px-6 py-3 bg-white text-primary-600 font-semibold rounded-lg shadow-md hover:shadow-lg hover:scale-105 transition-all"
          >
            –í—Å–µ –æ—Ç–∑—ã–≤—ã –Ω–∞ –Ø–Ω–¥–µ–∫—Å–µ
            <ExternalLink className="w-5 h-5" />
          </a>
        </div>
        <div className="text-center mt-10">
          <a
            href="https://www.kudanamore.ru/dzhubga/hotels/27479/"
            target="_blank"
            rel="noopener noreferrer"
            className="inline-flex items-center gap-2 px-6 py-3 bg-white text-primary-600 font-semibold rounded-lg shadow-md hover:shadow-lg hover:scale-105 transition-all"
          >
            –í—Å–µ –æ—Ç–∑—ã–≤—ã –Ω–∞ kudanamore.ru
            <ExternalLink className="w-5 h-5" />
          </a>
        </div>
        <div className="text-center mt-10">
          <a
            href="https://2gis.ru/sochi/firm/70000001038105191/38.700372%2C44.310423/tab/reviews"
            target="_blank"
            rel="noopener noreferrer"
            className="inline-flex items-center gap-2 px-6 py-3 bg-white text-primary-600 font-semibold rounded-lg shadow-md hover:shadow-lg hover:scale-105 transition-all"
          >
            –í—Å–µ –æ—Ç–∑—ã–≤—ã –Ω–∞ 2–ì–∏—Å
            <ExternalLink className="w-5 h-5" />
          </a>
        </div>
      </div>
    </section>
  );
}
